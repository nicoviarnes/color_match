[gd_scene load_steps=8 format=3 uid="uid://xx38c0f5gjnj"]

[ext_resource type="PackedScene" uid="uid://bdmkqkis3pdab" path="res://scenes/game/grid/grid.tscn" id="1_2qm51"]
[ext_resource type="Script" path="res://scenes/game/game.gd" id="1_hrhd6"]
[ext_resource type="PackedScene" uid="uid://c22hqjd76ir6v" path="res://scenes/game/score/score.tscn" id="1_ud7bf"]
[ext_resource type="Texture2D" uid="uid://b7ttd73xomo40" path="res://assets/KawaiiCupcakeAssetPack/UI/BG-normal-blue.png" id="2_02fjl"]
[ext_resource type="PackedScene" uid="uid://cgxca8kqnnyq0" path="res://scenes/game/level_timer/level_timer.tscn" id="2_78uw5"]
[ext_resource type="Texture2D" uid="uid://bikv4nwe6ch4r" path="res://assets/KawaiiCupcakeAssetPack/UI/window2-yellow.png" id="4_8ammd"]
[ext_resource type="Script" path="res://scenes/game/Camera2D.gd" id="9_2hxfr"]

[node name="Game" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_hrhd6")

[node name="Bg-normal-blue" type="Sprite2D" parent="."]
position = Vector2(584, 615)
scale = Vector2(1.81626, 1.81626)
texture = ExtResource("2_02fjl")

[node name="Score" parent="." instance=ExtResource("1_ud7bf")]
layout_mode = 1

[node name="LevelTimer" parent="." instance=ExtResource("2_78uw5")]
layout_mode = 1

[node name="TextureRect" type="TextureRect" parent="."]
custom_minimum_size = Vector2(500, 500)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -275.0
offset_top = -309.0
offset_right = 275.0
offset_bottom = 313.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
texture = ExtResource("4_8ammd")
expand_mode = 1

[node name="Grid" parent="." instance=ExtResource("1_2qm51")]
layout_mode = 1
offset_left = -229.5
offset_top = -264.5
offset_right = 299.5
offset_bottom = 264.5
theme_override_constants/h_separation = 2
theme_override_constants/v_separation = 2
grid_size = 2

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(581, 330)
zoom = Vector2(0.8, 0.8)
script = ExtResource("9_2hxfr")

[node name="ShakeTimer" type="Timer" parent="Camera2D"]
wait_time = 0.2
one_shot = true

[connection signal="all_matched" from="Score" to="." method="_on_all_matched"]
[connection signal="out_of_time" from="LevelTimer" to="Grid" method="_on_level_timer_out_of_time"]
[connection signal="gameover" from="Grid" to="." method="game_over"]
[connection signal="shake_screen" from="Grid" to="Camera2D" method="screen_shake"]
[connection signal="update_score" from="Grid" to="Score" method="_on_update_score"]
[connection signal="timeout" from="Camera2D/ShakeTimer" to="Camera2D" method="_on_shake_timer_timeout"]
